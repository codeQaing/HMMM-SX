(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8e42b990"],{"643c":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tags-container"},[a("el-card",[t.subject.id&&t.subject.name?a("div",{attrs:{slot:"header"},slot:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("学科管理")]),a("el-breadcrumb-item",[t._v(t._s(t.subject.name))]),a("el-breadcrumb-item",[t._v("目录管理")])],1)],1):t._e(),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form",{attrs:{"label-width":"80px",size:"small",inline:!0}},[a("el-form-item",{attrs:{label:"目录名称"}},[a("el-input",{staticStyle:{},model:{value:t.requestParams.tagName,callback:function(e){t.$set(t.requestParams,"tagName",e)},expression:"requestParams.tagName"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{model:{value:t.requestParams.state,callback:function(e){t.$set(t.requestParams,"state",e)},expression:"requestParams.state"}},[a("el-option",{attrs:{value:1,label:"启用"}}),a("el-option",{attrs:{value:0,label:"禁用"}})],1)],1),a("el-form-item",{staticStyle:{"text-align":"right"}},[a("el-button",{on:{click:function(e){return t.clear()}}},[t._v("清除")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.filter()}}},[t._v("搜索")])],1)],1)],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[t.subject.id&&t.subject.name?a("el-button",{attrs:{type:"text",icon:"el-icon-back"},on:{click:function(e){return t.$router.back()}}},[t._v("返回学科")]):t._e(),a("el-button",{attrs:{icon:"el-icon-edit",type:"success",size:"small"},on:{click:function(e){return t.openDialog()}}},[t._v("新增目录")])],1)],1),a("el-alert",{staticClass:"alert",staticStyle:{"margin-bottom":"15px"},attrs:{title:"数据一共 "+t.total+" 条",type:"info",closable:!1,"show-icon":""}}),a("el-table",{attrs:{data:t.tags}},[a("el-table-column",{attrs:{label:"序号",type:"index",width:"80px"}}),a("el-table-column",{attrs:{label:"所属学科",prop:"subjectName"}}),a("el-table-column",{attrs:{label:"标签名称",prop:"tagName"}}),a("el-table-column",{attrs:{label:"创建者",prop:"username"}}),a("el-table-column",{attrs:{label:"创建日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("parseTimeByString")(e.row.addDate)))]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(1===e.row.state?"已启用":"已禁用"))]}}])}),a("el-table-column",{attrs:{label:"操作",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.toggleState(e.row)}}},[t._v(t._s(1===e.row.state?"禁用":"启用"))]),a("el-button",{attrs:{type:"text",disabled:1===e.row.state},on:{click:function(a){return t.openDialog(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"text",disabled:1===e.row.state||e.row.totals>0},on:{click:function(a){return t.delTag(e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"margin-top":"20px","text-align":"right"},attrs:{background:"",layout:"prev, pager, next, sizes, jumper",total:t.total,"page-size":t.requestParams.pagesize,"current-page":t.requestParams.page,"page-sizes":[5,10,20,50],"hide-on-single-page":""},on:{"current-change":t.pager,"size-change":t.handleSizeChange}})],1),a("tags-add",{ref:"tagssAdd",attrs:{data:t.currTag},on:{updateList:function(e){return t.updateList()}}})],1)},s=[],n=(a("96cf"),a("1da1")),i=a("fcec"),l=a("76de"),u={name:"TagsList",components:{TagsAdd:l["default"]},data:function(){return{requestParams:{tagName:null,state:null,page:1,pagesize:10},total:0,tags:[],currTag:{}}},computed:{subject:function(){return this.$route.query||{}}},created:function(){this.getList()},watch:{"$route.query":function(){this.getList()}},methods:{openDialog:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.currTag=e,this.$nextTick((function(){t.$refs.tagssAdd.open()}))},toggleState:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["b"])({id:t.id,state:1===t.state?0:1});case 2:e.$message.success("操作成功"),t.state=1===t.state?0:1;case 4:case"end":return a.stop()}}),a)})))()},delTag:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该标签, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});case 2:return a.next=4,Object(i["d"])(t);case 4:e.$message.success("删除成功"),e.getList();case 6:case"end":return a.stop()}}),a)})))()},clear:function(){this.requestParams={tagsName:null,state:null,page:1,pagesize:10}},filter:function(){this.requestParams.page=1,this.getList()},getList:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.requestParams.subjectID=t.subject.id||null,e.next=3,Object(i["c"])(t.requestParams);case 3:a=e.sent,r=a.data,t.tags=r.items,t.total=r.counts;case 7:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.requestParams.page=1,this.requestParams.pagesize=t,this.getList()},pager:function(t){this.requestParams.page=t,this.getList()},updateList:function(){this.currTag.id||(this.requestParams.page=1),this.getList()}}},c=u,o=(a("7392"),a("2877")),g=Object(o["a"])(c,r,s,!1,null,"2b286e62",null);e["default"]=g.exports},7392:function(t,e,a){"use strict";var r=a("e2af"),s=a.n(r);s.a},e2af:function(t,e,a){}}]);
//# sourceMappingURL=chunk-8e42b990.b12eaa9c.js.map